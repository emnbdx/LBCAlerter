@model IEnumerable<LBCAlerterWeb.Models.Ad>

@{
    ViewBag.Title = "Annonces";
}

<h2>Annonces</h2>

@if (Model.Count() >= 50) { 
    <h4>Liste des 50 dernières annonces trouvées</h4>
}
else
{ 
    <h4>Liste des @Model.Count() dernières annonces trouvées</h4>
}

@if (Model.Count() > 0) {
    @Html.ActionLink("Flux Rss", "AdListFeed", new { id = Model.First().Search.ID })
}

<table class="table">

@foreach (var item in Model) {
    <tr>
        <td>
            <a href="@Html.DisplayFor(modelItem => item.Url)">@Html.DisplayFor(modelItem => item.Title)</a>
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @if (item != null && item.PictureUrl.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Length > 0) {
                <img src="@Html.DisplayFor(modelItem => item.PictureUrl).ToString().Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).First()" />
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Place)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price).ToString().Replace("&amp;nbsp;&amp;euro;", " €")
        </td>
    </tr>
}

</table>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-actions no-color">
        @Html.ActionLink("Retour à la liste des recherches", "Index")
    </div>
}
